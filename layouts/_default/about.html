{{- define "main" }}
{{- $aboutData := site.Data.about -}}
{{- $useProfileData := .Param "useProfileData" | default false -}}
<article class="post-single about-single">
  <header class="post-header">
    <h1 class="post-title entry-hint-parent">{{ .Title }}</h1>
    {{- with .Description }}
    <div class="post-description">{{ . }}</div>
    {{- end }}
    <div class="about-social">
      {{- partial "social_icons.html" (dict "align" "left") -}}
    </div>
  </header>

  {{- if and $useProfileData $aboutData }}
  <div class="about-profile">
    {{- with $aboutData.profile.roles }}
    <section class="about-block about-block-title">
      <h2>{{ $aboutData.profile.title | default "Title" }}</h2>
      <ul class="about-title-list">
        {{- range . }}
        <li>{{ . }}</li>
        {{- end }}
      </ul>
    </section>
    {{- end }}

    {{- with $aboutData.highlights }}
    <section class="about-block about-block-highlights">
      <h2>Highlights</h2>
      <ul class="about-highlight-list">
        {{- range . }}
        <li>{{ . }}</li>
        {{- end }}
      </ul>
    </section>
    {{- end }}

    {{- with $aboutData.certifications }}
    <section class="about-block about-block-certifications">
      <h2>Certifications</h2>
      <ul class="about-cert-list">
        {{- range . }}
        <li>{{ . }}</li>
        {{- end }}
      </ul>
    </section>
    {{- end }}

    {{- with $aboutData.honors }}
    <section class="about-block about-block-honors">
      <h2>Honors</h2>
      <ul class="about-honor-list">
        {{- range . }}
        <li>{{ . }}</li>
        {{- end }}
      </ul>
    </section>
    {{- end }}

    {{- with $aboutData.works }}
    <section class="about-block about-block-works">
      <h2>Works</h2>
      <div class="about-work-groups">
        <section class="about-work-group">
          <h3>已发布（书籍 / 标准）</h3>
          <ul class="about-work-list">
            {{- range . }}
            {{- if or (eq .type "编写-书籍") (eq .type "编制-标准") }}
            <li>
              <span class="about-work-type">{{ .type }}</span>
              {{- if .url }}
              <a class="about-work-title" href="{{ .url }}" target="_blank" rel="noopener noreferrer">{{ .title }}</a>
              <span class="about-work-arrow" aria-hidden="true">↗</span>
              {{- else }}
              <span class="about-work-title">{{ .title }}</span>
              {{- end }}
            </li>
            {{- end }}
            {{- end }}
          </ul>
        </section>

        <section class="about-work-group">
          <h3>待出版 / 待发布（书籍 / 标准）</h3>
          <ul class="about-work-list">
            {{- range . }}
            {{- if or (eq .type "编写-书籍（待出版）") (eq .type "编制-标准（待发布）") }}
            <li>
              <span class="about-work-type">{{ .type }}</span>
              {{- if .url }}
              <a class="about-work-title" href="{{ .url }}" target="_blank" rel="noopener noreferrer">{{ .title }}</a>
              <span class="about-work-arrow" aria-hidden="true">↗</span>
              {{- else }}
              <span class="about-work-title">{{ .title }}</span>
              {{- end }}
            </li>
            {{- end }}
            {{- end }}
          </ul>
        </section>

        <section class="about-work-group">
          <h3>翻译标准（节选）</h3>
          <ul class="about-work-list">
            {{- range . }}
            {{- if eq .type "翻译-标准" }}
            <li>
              <span class="about-work-type">{{ .type }}</span>
              {{- if .url }}
              <a class="about-work-title" href="{{ .url }}" target="_blank" rel="noopener noreferrer">{{ .title }}</a>
              <span class="about-work-arrow" aria-hidden="true">↗</span>
              {{- else }}
              <span class="about-work-title">{{ .title }}</span>
              {{- end }}
            </li>
            {{- end }}
            {{- end }}
          </ul>
        </section>
      </div>
      {{- with $aboutData.translation_note }}
      <p class="about-translation-note">{{ . }}</p>
      {{- end }}
    </section>
    {{- end }}

    {{- with $aboutData.roadmap }}
    <section class="about-block">
      <h2>Next</h2>
      <ul class="about-list">
        {{- range . }}
        <li>{{ . }}</li>
        {{- end }}
      </ul>
    </section>
    {{- end }}
  </div>
  {{- else if .Content }}
  <div class="post-content">
    {{- if not (.Param "disableAnchoredHeadings") }}
    {{- partial "anchored_headings.html" .Content -}}
    {{- else -}}
    {{ .Content }}
    {{- end }}
  </div>
  {{- end }}
</article>
{{- end }}
