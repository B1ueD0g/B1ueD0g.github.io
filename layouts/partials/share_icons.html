<div class="bd-share" data-share-root data-share-title="{{ .Title | plainify }}" data-share-url="{{ .Permalink }}">
  <button class="bd-share-trigger" type="button" data-share-open aria-haspopup="dialog" aria-expanded="false">
    <span class="bd-share-trigger-icon" aria-hidden="true">↗</span>
    <span>转发</span>
  </button>
  <p class="bd-share-wechat-tip">微信内请使用右上角“···”菜单转发</p>

  <div class="bd-share-sheet" data-share-sheet hidden>
    <button class="bd-share-backdrop" type="button" data-share-close aria-label="关闭转发面板"></button>
    <section class="bd-share-panel" role="dialog" aria-modal="true" aria-label="选择转发渠道">
      <header class="bd-share-head">
        <h3>转发到</h3>
        <button class="bd-share-close" type="button" data-share-close aria-label="关闭">✕</button>
      </header>

      <div class="bd-share-grid">
        <button type="button" class="bd-share-option" data-share-action="x">X</button>
        <button type="button" class="bd-share-option" data-share-action="facebook">Facebook</button>
        <button type="button" class="bd-share-option" data-share-action="linkedin">LinkedIn</button>
        <button type="button" class="bd-share-option" data-share-action="wechat">微信</button>
        <button type="button" class="bd-share-option" data-share-action="moments">朋友圈</button>
        <button type="button" class="bd-share-option" data-share-action="copy">复制链接</button>
      </div>

      <div class="bd-share-qr" data-share-qr hidden>
        <img data-share-qr-image alt="分享二维码" loading="lazy" />
        <p data-share-qr-tip>微信扫码后即可分享</p>
      </div>
    </section>
  </div>
</div>

<script>
  (function () {
    var ua = navigator.userAgent || "";
    if (/MicroMessenger/i.test(ua)) return;
    if (window.BlueDogShareSheetLoaderReady) return;
    window.BlueDogShareSheetLoaderReady = true;
    var script = document.createElement("script");
    script.src = "{{ "js/share-sheet.js" | relURL }}";
    script.defer = true;
    document.body.appendChild(script);
  })();
</script>
